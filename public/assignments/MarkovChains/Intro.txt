Markov chains use probability tables to predict the next element based on prior elements. For melody generation, we generally want to look at what notes we just played to predict what the next note should be.

A first-order markov chain considers just the previous note, e.g. for the melody CDCEC, the probabilities for generating the next note would be:

* C: [D:50%, E:50%]
* D: [C: 100%]
* E: [C: 100%]

For a 2nd order markov chain we would consider the previous two elements, so [CD] would have a 100% probability of being followed by C. Obviously, higher orders need much more data to be useful.

[CD] in this context is called an ngram (or N-gram, where N==order). An ngram is the collection of data used to look for the next element.

[Basic Markov Chain](https://ianhattwick.com/creativitas/?code=PTBGEMGcEsGMAIAO1wDsD29LgLaIDYCmATgFBEAuW8AvPKoQO7wDK0eRxAFAJTmFV0AVwqIRtek3gAVdAwB0AWSH4K0AgE8u8gIw95FdABFCkNanBq5vUpHmw5DWBS7DRIvnfzpwAEy4A5Mho6AGe8tCo0BQA4kLQNqQgsPhQkPCGWIbEhPDCxPA44MQA1ugAbvCwABbgkaQpafCKxWXlAN6k8FVyZsRCzujckIQAjjyd3d0U1dB2I6MSC11TM3PyQlGjQrl0ANryhwzMLAJca-NjPAC6ANwr07N2RRTE0AAeEnvXDxlP8mZihQAHLoCi7LBjPYABh+Uz+61gQmIOVQILBEIuAIoQNB4JWvyxrzqqHO-wWfG6AF8ViAqjlLLkZrkXm9PgAzIbwQjgGrwTbQba5crgfA7eCMaLVeBoGUo8AaWnAPLspDoSAwUBELADWCEQi+SIAc3gIrFphWxMiXApkym0HZXAAhABBeUaCKQN3EBU2q48eA5CjI1C-B1+0byIioI0zAA8ekDAhDvxAZiGTOquSRKMIaMhi0QxHQiBIagt8KxCyWY0J-wFQq+h3kx1YZyrVzudfWgOI6PBNdGMLhq3+OdR-YhC2H3eeljZEnaVPuqeAsAZA+ZhXnH1+nIKXEo8GgEmht2P8DjBajedj0oAtPAdOfoABqV8Bu2VsfIieDvbQF28KPOsDDvFQdDTier5PkB8C-N0DrwM6WKsh8exYg2OwRKgviEO8ADyjpYuOeYUDcn4IaO6xoe8GH1ls2GRHhhHET+uZojcXxwfCNLdFRqE7nRmGMYQOEsURZKIr+ZE3PIYiQNUUl2GB5H3LxpArHx8AgEGbyEOUuRyEZqpbog6qatqkC6vqhoxqaoo7JAKxGmclHftJxAAJK4fhEgiYKTG+axyn2DJaJ4oQlLUXYBR0C0MzyD6uHoDgvDwAAVAic6vOhJHIj5LHXDeMYzOpMVhRxk7+f8tH0Z5hX4dcewJdU8jst4QyhcQNy-EGIbZZVE6RVppA0vwVA4BIrYtKUFRcDCAA0OiLQATMta2LQAzJtK07etK3rQA7ItABsi0nedACsZ2LQALNtm07Q9O0rdCG2wnwDioJA6BEFG6BGlwODyLRAYgHGj6ZCMmbZuFk1CUkyrzIYiCJLphAOMQvjwBo+R5IwqAZD6kTGvAviWOATpI3m4BarD8AlIQGigD42PHt9MpUFuqMqn8uSQOu+pE4YSMEAquP4zghDeL4GjHkTXAAMLNOAABWXJyPgGh8EeVpRDGRiU9xE1YLAooQkt60PTdJ0AJzLToPwjJOBGoAAEmgvicFwXAYOCi2GfgPA0AAfHadi5UarnEC6FA4rAJQAEoyzyIx+xii2mjL0X68aRs4vJQiKcD0CGrIPngsQZoZ+CPB8FSngCJFRHsp7uE+3wpAg-r5wkwbRoF+A4PAJD-KIBT4LpFuODoHh+C2PI+FFlw0Bh4U8iuS49c6aP97ixo09ZuPk+EEjPf9wt73W5tNv3YttsP-fN0PTf62fZpyRyIZfbpDgZcnn9rkBovRJoAIrmiEgZoJCl0NCHcOKxvpmDNhbL471r63yfo-e2i0HY6Cdog0BeRnDgEMhIVq7VOrcH-oaYAOhVo8HvFdQhP0qB4SNDkCENDoAAFJ6ErH6sQImgsLZ7HYZw648AYJHQyugEhhkxpAA)

[Higher order Markov Chains](https://ianhattwick.com/creativitas/?code=PQKgUAKgFglgzgAgKYA8CGBbADgGyQuKAewHdFiSEAXIhAYwCck0r80FYBzKJBhIhgBNeCALJoGAayIA3elDQwAdgBowJHkwQl8dNEvpElcGML4A5BFiYyYRAK6I4VFkkQakB4XVPLO1HgQlVCowZ1cAOgRoXSIcPDoqOwMiADMrGztHAhdWRHh6NHikQQR9BABRJU4GTDUBBHMAWhrMKLAwcyJWFTLU1j4qWuU-BABPB0KvUiUcIjRSqkCh-RMkowQMFgYYFAiwEGAOvCoCBABeIKRKAAU4saxiJTGACgAxUQAWAEowiJGqABxewwF6-E78exULBQi5XSgQIxICKiew4JK4V4RACM3wiNAAIm4kkoWMkwX86EZgokXg5oVDfmBQCAQAgAMJMVxiCTSOQAeQARgArJCJBCsw5gOg4NBwRDiKSydkKZQIADeYAQ2sMxiG9kSAjpQl451xGq1OqtS3gEQEZjh9t4AG5LVbtTa4BEtkNdnD1QBfV3unWeiLhBhA2oYOEAbQAum73WG4A4GHQkABlJAAR3sngzccTIY9sC9dHsDCYSiomdy+EuCaT1rLEQrVc8tfrdZ21ThAHJ+0mA0ngMBGMxWGVqLVjDB1gYfTsUAhUgwiDHyhJamMkxPXIq+RA0IK8C9t98LSWArbU5WM9m8wWG2Uq82dakjRCYHCAAzOhAfwAHkubcIjwaolgQJoby9J0+Bg7EAJgABqFDL01a9S1tVoY1AqtwxwGAMxeGBeh-FDYLtE0GDxYUiGUF5+wQftvmDLCYHSF4AEIwyXXZYzDXD40vPjtgEoTo3jIt2OvMTfRQQTW2EiIYUIc8q1jVCw3gkT321EcrUMnUx04JBTiWfBghQU5wlYJMzKocwQjrVwwSvEswywIh5RgU8kGcmzXLyOF5OXJScOjREez8F4w3basu1cb541k91OLi1tvN8-zAqSkLzkuewlGEVJlBKS8mCoSsDHiytEuCpAIvLerO0a8DPE4JYmmxRN9Ko4ISAANSKfNQqynyTFylz6zgWNxCWCJUjmI0FqgCJZ0EDd3LZLzJr8vA8sar0IK6qAUrSq1+rqjsa3atSoBeAbrhGnAxt+OTWwStr63G21vru+tCOIpAXmxFQdJolDcX6-qqpq57htGpBh1HYAzOCWop3YQaCFzfMlAzdorQx3hXEfAmSNOpZegjKNMDhJQ0RwDD304hBMttfjFMkzBot9aoXjpwFoxSi5CoQYrSvKwRWawnIJHpvCECFUVEgiSQkDGOBOa9bnvljX9Uv64zky+1rAe5S4UwFzhERFzAhZcSMHYwNjruUzwydYQQKefOMboa+tmrbC38uRamoB6+NjevT8+Beb8-2QhAgIQSOeuQtC5flqjSaxko-cJ5EHt1iJHKO+swXd69TfdeGGFqz3MdcX38efNLjNw-ne04F5cIwhAG4MXDxclkqkDK4JSgAfhYqXJ5l5iAC4EFwiJ6MY5jWOdYznF7+3oyd2iNSH8yEf3seF6nkoEDn-tr6XhBV8v-EdgwMFw1wecmJYvEtiwC8LAig+DnAAHxWBAV-IiVAmIqFYt6NAgDzD2AwIKXg3w2LGTHFtEgsx5iLECNzMoiB2DClTAYMqeBLS4PwQsdymFQytlJBgF8JBlC4NUuubAsCABEbwYB4CCJgfALx2FLHpMgGyngTBGG+MvXhvReFbCVDIXhNcdTsx4mGFhSBKrn0buxJMYZBAsHYJcAAUpmfk5hwy204q8MKuxehM3iL0X8GjsJelPEQQUjNrgIAAEJzEFC8EOpiXDxl6OqagDwkCr14Ug7+egFzAHIUYXhCAAyeKopWHAcIACqAAlAAMm2LkrBVZiioMUkpZcfGCg0cY1s5iEBbQrKwms5TJxIAqHgTpfC0DqLSmGNAEQoBMHSNbVseSRktIiLQuYCw-pel0QgSivCN4UN4XM20YznBjDwAs+AuA0BjDhLwpQSIdmWiTO01BnYIiCiIIIMYEQkmeEECqQRggy5oByaMtsRE6CSDBGle5AynkvLeUwDAsgkDfJwL80ZTSrS1I2kgGQRBNZVMSLUsueSNEjhHMyYAlR0DYCEY4NAZkwAQgwGMUQSA5ivLhMAhgcAszt2LkxX8CA+WfAQIKgArAgUVgrBUAGYEDSoAEwIHldiBASq+W-lYnS8ymxeTKlVAYS4uNDw6sUEoF4sq2IIDHAgTMWAxQOP4DRQCBgJCcAeTWMAKi+QqmNd0g82qZDHn8i8BlTKWVjF+FSYwcQI5ED7lq1RXrlCIIUkyMcHqjWJsWQQ9yY4gIwTgGgGQ+AJiViCKPbm3EOiWstYCL2Bdpy405U+YuGrTiDSLoWS4aaZAJqUOXWt5NuUkWxAANndl6RtlNQbwnbXo6URhUxHLmH3Ntg69GumZJKSU9AKmjBWCMPsET2COFGKIAAkgSU9jqYSnE3VKMcEbC2RkQBgXwQRuj4BoAQPQQjhA1CQCjCNzhNi+ERKemsvAZBFDhEG3w3xwGMMA7Zb9L5DYqF-CocG4NZUqGw58FQwr8MqGHURlQAB2YsuogNEESAWl8a0lorQYDBwQMBgDYjNU0T4lpENtKQH+l8L6WMAFJ2OWmHl+ooTVf1MCQNJSipGQDUZcIWsAJKIR7qUH4AkZiixhHMl0SpSgAAS+hBB4CYy8K5PQECFpZvBy0XpfScDMgwAAglQFwIKinMuYJyyz77ei2Y+jOY1WmzGqUcI9bUgmYCgfAwwSDOB-OsEvL8bJemnLvv5KkVIJmSrmYpC2uNnrdX+MoIa7tuqwbmstda21qRznwXdX6ntPrWAVYDWeDTYWXDgk1SuptHbivpt7fnAdg2p2Svle7QDUbwIxss9cGdY7wyrqegNyd3wgA)

[Encoding multiple types of data in a training set](https://ianhattwick.com/creativitas/?code=PQKgUAKgFglgzgAgKYA8CGBbADgGyQuKAewHdFiSEAXI5AOwGMiATfDAVxypl3wGsYdZoiIAzBMzRU0YQQgCyaAE58iAN2pK0dQYIDmBJFTgA6BAAkkSpABoEJKEjr38Da1PxF2VCVLQvZRhx2VgQAIyIqKGpHBDpI-BJ8XDQATyRmBDREJJwcLMQo-DCkKTj2DBKlMzBIWEQ0PNJC2K8qLG9qWiY6OBhWJXtHawQ5IvDlLLiE2UQU9MzslzyCobLxrGs1GC9EeKpE7JNagDkEu3HFFXUAYSg0OSIwgCskBh94UdY6bgZGrpi+AAonQ9FoMMh0Ng8McAII4OC0fa2LKiA6DKhaXSghCpLwIP7OZikOg4IhoTLjTHaPrcIjODBSJQwFDHEDAWp4HyIAC8cSQlAACkQcKksMQ6KkABQAMXkABYAJRgUy6KgAcXYMClyq5CDaHR8fLoAoQEHpSBM8k43Fw0pMAEZFSYaAARJBwbh0KQ7Og6lUmHom95Sg3eZVgUAgEAIG7uA4KZSqDQAeRebx80fZYAYOGyiCuybuD2cAG8wAhKwT6Z6lOx3kQlKGlAMeU6EOWq12YvATI2Bgg+f2rABuCvdytRXuMzEswcdgC+Y4nk-qJk9yg14PnAG0ALrjidT0yI9hKBhIADKSAAjuwnBfdweVz3TAwz9YfpfpAm+fvD92x6Bh+ThUN+HjfsyOJ8gA5DBAELgBwDAG4pQJv41K9DAdIMkyc6iEoRAQtoWRKFoqQAahHiFuoEBoGEeBSsoSiKh2AFdkBp7nlet73ow+B8sx7FVqIjZSnqMDzgADCOowIAAPIJZEmHgoJRAgAC0r59i2ViaQgDqyTAADUxmsZ2L7aWCmDzsx644DAF5SjAdiScZ2nDixJjPEQghSjBCAwYqy6WTA4hSgAhEBM7MigO5AdZGB7qx0V4XFCXgnuT4hS+qWzula6JXuJgdIQTFkTuJlAZ5yXCZWiFdg1VbIXoRiAvyKDcj+SAAa1VAnKgYHdTqbG5WuWBEHAfQMUgA2deBBy8tpMUsvFhXguakH6FKQHvmRoELUgip7jl3ZhTt42TdNeBzUNHi8ny7BCEgoiCBkrHWFQZ7OLtIFft1a29ntn53QcKlOHoUQaQ6B51dpJokAAao097zkBE1TTAM23YdcA7ooUQmKIZJiQTUAmFoQhESNMbo1dWM3YNuPg2pUDHadXZw79+3-R4JXsGV8MCsjwT4MqY1A39oMCdpwMHd19mOUgUoOjY1W6UoxlOnDcOfd9QtIyjPWNUhwCtSaWjofylBwLxD6WggvVOFYEF2-x4kQ1EdgbkoW42canA4OZwlhQgF3TmlgOmIlm2zqCUo+37GDHYOPKPc9r0mswweWQQ0i++q258mmrzvCYfBIKkcDh6YK0oIqO5SSdcNNYBa5y7zv7abW+jmoXmAJ-nSfBVzhXO5bGTXne9u7tzIOHVHwE89LLOQ1A0N7s3L6iYMHsfNJRkKQgqlr9DRmmTnudWePHjMFPfEXvzZUJUYOPDYqI8vq33Z60oP1jxbW+997anSajHIgW146JXMggX+zhEqpwQE9VgmcMgIAAPyBWQS9N6zAAoAC4ECJW8r5P0AUgojiaj3UEfdwSDxYh2WBRh9a1kQdg1BmRMEwXYbgghedBgumZBgHU65cDYX8oFZ0jIsBSiwA8QYPIAB8CA5EwGqHAMRVB-I2CCiYaRUoTgVCqB-Sh45kLEhIKScklJYh11WP4Z4iJnCvTwOOCxViKQjQsquXs3oMAyxIIICxJVCLYC0QAIhlDAPAcRMD4ClIEqIbRIQHCwvSRU+Dwl2HCYya4ahwmfyrKHSKQE-FHSYV9P+IUAJAUkNIecAApS8KYTjrjjnoMK0o8qxTsHQQOdgpKFJ8aYBiTx5wIwQAAITJGEKUi86loD3HYUs1AxRIEIeEtAWAxF-BwsARx9JwkIAXEM7SZ58h8gAKoACUAAygZ4xIBLhmG5tya4mFGWEQpNS1z+D5MSd8-ifgPLQkgIEeAgURLQAU06QE0AmCgNYcQfIgLnNhb8kw7iyQUjRmuMpCB3LhO8k48J6Lezws9KkGEzB4DzHnOE+IJpSXjgAgCiooEPksFSCYLZWAnDMDuNE5g7y0CnLhYGByDA+A6lOmyyFnLmDcusBgdQSBBU4GFXC75XZXkUyQGoIgFdnnvFee885hTEKIUjMABAQIoS8CQXANArUwB6gwKkeQSAySKvnHIpQttgHuxglJBAIb5QIHDQAVgQNG8N4aADMCBE0ACYECpodAZUNoagqurarkos9w5DGlNDRNQxY-LJuCggZCCBLx8oYJ0-UGtRjOGUHodlPwwD5tuIWugILqJJlovRRi7rPXetSMqHoiIYRkj0FKBA3ay29r0WlCMyFF3lr7Vi6xI1kLyS0k6tQ+A8RnjiAguuEVag1preqG+VsJm22nvxXNPgEaBsfHyDdy7zYuwOO+5WDoABsI8Txuyctbf9k6awiktLOqUb6wNHTHJGLMWYCTxn0JoEsmGFmOsw-IAAkq6AjLbDQIFQ9mZCPQj2+0QBgfoklkQAjgH8GJrAwRIB6lOnw9GaXmgIz8Kwah-h8ilLxmAiolEWW4wQVjMtG42CkjYVWqtk02DU-KGwkatM2EA7pmwAB2Z81Zeg+CIO8NAR75xkyJiTJs4ngAOkrRpeU44ZPsesDLcTABSJz444GycaEgHcHnONZXcgZkA5npBHrAFa5Cx5Rg5GGIkYoWoNX6lPdSbEBhcM0BbbmEIPUEuxBKGUPplQrAvqwzl10fgnzVaYE9dE0lq3AArkgLAWGpX6nEGV19Riqu236gkFMdBzDaGYHgJs8HzgICPUHKT45TCzj0K1JQsIqDSCldcr1pRbazYOHYBb4s2tUixDoHEuHPhjFiDvCEYgsitrImkBAO5+uGMq0oXpCRjPZcu3oOr0gn5QHnTuJrgnvsLoY-xyHwmcCHaOllU7EOWuidR1YLWipvOuZOSqV+o3RCiAm0Iab-oczQZnUQOdX6SwrvyhGN1g6l0lnGSW5nm6VZVprSmZtj341do58uqiBxS10RmjtC7+ggeiutQ4JwLgiF3vwP4R9D9UtZARLQPqT3SLkTex9wbUPkQHj1Ahp9H6F1C7pz+ie-753xtTSPddWypQoCUXFGGrFqNWGMO1NXM8CJEXwdaysJFmKvce+9tCNgTfMZgNCCiNbdcR9SL16Yi0wDm-V2zkg-6V0yPd4oz3tUp0wZUtT+DApINjlAxb5WEHEOKiAA)